### Chapter03 「HTTPでやり取りする仕組み」 の覚えていること

#### ○ HTTPのメッセージの構造

HTTPは、プロトコルの一種である。
TCP通信によるものであり、UDP通信ではない。

TCP通信であるため、3 Way Handshakeにより通信が成立するか必ず事前の確認が行われる。
SYNパケットとACKパケットを相互に送り合い、ACKパケットが互いに受信してからが通信のスタート。

##### ● リクエストメッセージ

クライアントサイドから送られる。
これは、Webブラウザを使うものとWebサーバーの関係だけでなく、
WebサーバーとAPサーバーの関係でも成立しうる。

- リクエスト行
  - 「メソッド → URI → HTTPバージョン」の順
  - （例）GET http://~.com/index.html:80 HTTP/1.1
    - GETは、URLを通してサーバーにデータを渡す
    - POSTは、メッセージボディ内に記載してデータを渡す
    - それぞれの特性を生かすことが大事
      - パスワードなどは、通常POSTを通してやり取りする
      - GETを使うとブラウザの閲覧履歴に情報が残ってしまうため
- メッセージヘッダー
  - ウェブブラウザの情報や文字コードなどの情報が記載
- メッセージボディ
  - 中身本体（空であることもある）

##### ● レスポンスメッセージ

サーバーサイドから送られる。

- ステータス行
  - 「ステータスコード → HTTPバージョン」の順？
  - （例）HTTP/1.1 200 OK 
  - 「200」などの数字によって示す意味が異なる。
- メッセージヘッダー
  - Webサーバーのソフトウェアなどの情報が記載
- メッセージボディ
  - 中身本体（HTML、CSS、JPEGなどのファイル）

#### ○ HTTPのバージョン

HTTPは「0.9 → 1.0 → 1.1 → 2.0」と進化してきた。

- HTTP 0.9
  - HTTP1.0が規格化される以前のHTTP
  - HTTPが出来る前は、統一の通信規約がなかった（ブラウザごとにバラバラ）
- HTTP 1.0
  -　W3Cが規格を統一した
- HTTP 1.1
  - 一番使われているバージョン
  - データ通信が高速化された
    - これまではレスポンスが返ってきてから次のリクエストが送れた
    - 1.1ではレスポンスを待つことなくリクエストを送れるようになった
- HTTP 2.0
  - より高速化された
    - これまでは送られたリクエストを順番に処理する必要があった
    - 2.0では順番に左右されなくなった

#### ○ HTTPS

S = SSL = Secure Socket Layer を意味する。
今では、TLSという通信の規格がある。

SSLでは、通信が暗号化されている。
また、第３者組織が発行している証明書の確認が行われる。
他にも、改竄が行われた場合、それを検知する仕組みがある。

公開鍵を使う仕組みにより、互いに暗号化されたファイルを復号している。
※　仕組みは、難しそうな感じだった。

#### ○ ステートレスとステートフル

ステートレスとは、一つの通信が独立して完結していることを意味する。
そのため、これまでの通信の情報に依存する必要がなく、シンプルに通信が完結する。

ただし、セッション（何度もやり取りを行うな場合）においては、
クライアントの情報が保持できずに不都合が生じてしまうため、クッキーを使う必要がある。

クッキーにより、サーバー側でどのクライアントからの通信か確認することが出来る。

ただし、単純にクッキーにパスワードなどを直接入れてやり取りをすると支障が出るため、
セッションIDをクッキーにてやり取りすることが多い。

セッションIDは、セッションごとに作成され、そして削除される。
セッション間に盗まれて悪用されない限り、乗っ取り等の被害は起きない。

### Chapter03で他に覚えておくべきこと

- リクエスト行で記載されるのは「http\://~」ではない。
  - そもそもサーバーは特定されているので、ここではパス名のみをやり取りする。
- HTTPメソッドについてもう少し深く知ること。
  - PUT や DELETE などがある
  - GETは、URLの末尾に「？」をつけて「パラメータ = 値」という形式で送信する。
  - POSTは、メッセージボディを通して、同様の形式で送信する。
- HTTP1.1では、HTTPキープアライブとHTTPパイプラインができた。
- HTTPSについて理解を深めていくこと（とはいえ、じっくりと学んでいかないと厳しそう）
- Cookieは、メッセージヘッダーを通してやり取りされる。
